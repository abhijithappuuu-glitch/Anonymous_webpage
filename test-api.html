<!DOCTYPE html>
<html>
<head>
    <title>NOBODY AI Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
            background: #1a1a1a;
            color: #fff;
        }
        .test-area {
            background: #2a2a2a;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }
        input {
            width: 70%;
            padding: 10px;
            background: #333;
            border: 1px solid #555;
            color: #fff;
            border-radius: 5px;
        }
        button {
            padding: 10px 20px;
            background: #00ff00;
            color: #000;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
        }
        button:hover {
            background: #00cc00;
        }
        .response {
            margin-top: 20px;
            padding: 15px;
            background: #1a3a1a;
            border-left: 4px solid #00ff00;
            border-radius: 5px;
            white-space: pre-wrap;
        }
        .error {
            background: #3a1a1a;
            border-left: 4px solid #ff0000;
        }
        .log {
            background: #1a1a2a;
            border-left: 4px solid #0088ff;
            font-family: monospace;
            font-size: 12px;
        }
    </style>
</head>
<body>
    <h1>üé≠ NOBODY AI Test</h1>
    <p>Test the Google Gemini API integration directly</p>
    
    <div class="test-area">
        <input type="text" id="userInput" placeholder="Type your message... (e.g., 'hi', 'what is CTF?')" value="hi">
        <button onclick="testAI()">Send</button>
        <div id="result"></div>
    </div>

    <script>
        async function testAI() {
            const userInput = document.getElementById('userInput').value;
            const resultDiv = document.getElementById('result');
            
            resultDiv.innerHTML = '<div class="log">üîÑ Sending request to Gemini API...</div>';
            
            const prompt = `You are NOBODY, the AI assistant for Anonymous Cybersecurity Club at SDMCET (founded 2024).

OUR CLUB:
- Founders: Abhijith (Penetration Testing) & Bhuvanendra (Dark Web Security)
- Team: Satvik, Tejaswini, Ramya, Chaithanaya, Deepak
- 50+ CTF wins, Top 10 nationally, 25+ CVE discoveries, 150+ members
- Email: anonymous.sdmcet@gmail.com
- Activities: Weekly workshops, monthly CTFs, hackathons, bug bounty sessions

YOUR EXPERTISE: Ethical hacking, web security, CTFs, network security, cryptography, malware analysis, social engineering, bug bounties, career guidance.

PERSONALITY: Friendly, enthusiastic, conversational. Use simple language and occasional emojis. Be encouraging and helpful!

INSTRUCTIONS:
- Chat naturally like a helpful friend
- Keep responses under 80 words
- If asked about non-cybersecurity topics, politely redirect to security/club topics
- Be passionate about teaching and encouraging

User: ${userInput}

Your response (be conversational and friendly):`;

            try {
                // NOTE: Replace with your API key for testing
                const apiKey = prompt('Enter your OpenAI API key (or press OK to skip):');
                
                if (!apiKey) {
                    resultDiv.innerHTML += '<div class="error">‚ùå API key required for testing</div>';
                    return;
                }
                
                const response = await fetch('https://api.openai.com/v1/chat/completions', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${apiKey}`
                    },
                    body: JSON.stringify({
                        model: 'gpt-3.5-turbo',
                        messages: [
                            { role: 'system', content: prompt },
                            { role: 'user', content: userInput }
                        ],
                        temperature: 0.9,
                        max_tokens: 200
                    })
                });

                resultDiv.innerHTML += '<div class="log">üì° Response Status: ' + response.status + '</div>';

                if (!response.ok) {
                    const errorData = await response.json();
                    throw new Error(`API Error ${response.status}: ${errorData.error?.message || 'Unknown error'}`);
                }

                const data = await response.json();
                console.log('Full API Response:', data);
                
                resultDiv.innerHTML += '<div class="log">üì¶ Response Structure: ' + JSON.stringify(data, null, 2).substring(0, 200) + '...</div>';

                if (data?.choices?.[0]?.message?.content) {
                    const aiText = data.choices[0].message.content.trim();
                    resultDiv.innerHTML += '<div class="response">‚úÖ AI Response:\n\n' + aiText + '</div>';
                } else {
                    resultDiv.innerHTML += '<div class="error">‚ö†Ô∏è Unexpected response structure</div>';
                }
                
            } catch (error) {
                resultDiv.innerHTML += '<div class="response error">‚ùå Error:\n\n' + error.message + '</div>';
                console.error('Test Error:', error);
            }
        }
    </script>
</body>
</html>
